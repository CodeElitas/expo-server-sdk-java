plugins {
  id 'java-library'
  id 'maven-publish'
}

ext {
  commonsLangVersion = '3.12.0'
  jacksonVersion = '2.13.4'
  junitVersion = '5.8.2'
}

group = 'com.niamedtech.expo'

repositories {
  mavenCentral()
}

dependencies {
  implementation "com.fasterxml.jackson.core:jackson-databind:${jacksonVersion}"
  implementation "com.fasterxml.jackson.core:jackson-core:${jacksonVersion}"
  implementation "org.apache.commons:commons-lang3:${commonsLangVersion}"
  
  testImplementation "org.junit.jupiter:junit-jupiter-api:${junitVersion}"
  testImplementation 'org.mockito:mockito-core:3.3.3'
  
  testRuntimeOnly "org.junit.jupiter:junit-jupiter-engine:${junitVersion}"
}

test {
  useJUnitPlatform()
}

publishing {
  repositories {
    maven {
      name = "OSSRH"
      url = version.toString().endsWith('-SNAPSHOT') ? 'https://s01.oss.sonatype.org/content/repositories' : 'https://s01.oss.sonatype.org/service/local/staging/deploy/maven2/'
      credentials {
        username = System.getenv("MAVEN_USERNAME")
        password = System.getenv("MAVEN_PASSWORD")
      }
    }
  }
}